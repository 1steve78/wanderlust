<% layout("/layouts/boilerplate") %>


<div id="filters" class="shadow-sm">
  <div class="filters-left d-flex flex-wrap align-items-center">
    <div class="filter active"><i class="fa-solid fa-fire"></i><p>Trending</p></div>
    <div class="filter"><i class="fa-solid fa-bed"></i><p>Rooms</p></div>
    <div class="filter"><i class="fa-solid fa-water"></i><p>Beachfront</p></div>
    <div class="filter"><i class="fa-solid fa-mountain"></i><p>Mountains</p></div>
    <div class="filter"><i class="fa-solid fa-city"></i><p>City</p></div>
    <div class="filter"><i class="fa-solid fa-person-swimming"></i><p>Pool</p></div>
    <div class="filter"><i class="fa-solid fa-tree"></i><p>Forest</p></div>
    <div class="filter"><i class="fa-solid fa-dumbbell"></i><p>Gym</p></div>
    <div class="filter"><i class="fa-solid fa-paw"></i><p>Pet Friendly</p></div>
    <div class="filter"><i class="fa-solid fa-wallet"></i><p>Budget</p></div>
    <div class="filter"><i class="fa-solid fa-heart"></i><p>Favorites</p></div>
  </div>

  <div class="tax-toggle ms-auto">
    <div class="form-check form-switch">
      <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
      <label class="form-check-label" for="switchCheckDefault">
        Display total after taxes
      </label>
    </div>
  </div>
</div>

</div>



<div class="container listings-container mt-4 mb-5">
  <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-4">
    <% for (let listing of allListings) { %>
      <div class="col">
        <div class="card listing-card shadow-sm position-relative h-100">
          <a href="/listings/<%= listing._id %>" class="listing-link stretched-link"></a>

          <img src="<%= listing.image.url %>" class="card-img-top show-img" alt="listing_img">

          <div class="card-body mt-2">
            <h5 class="card-title mb-1 fw-semibold text-truncate"><%= listing.title %></h5>
            <p class="card-text text-muted mb-1">
              <i class="fa-solid fa-location-arrow me-1"></i>
              <%= listing.location || "Unknown Location" %>
            </p>
            <p class="card-text fw-semibold mb-0" style="color:#fe424d;">
              â‚¹ <%= listing.price.toLocaleString("en-IN") %> 
              <span class="text-muted fw-normal">/night</span>
              <i class="tax-info ">&nbsp;+18% GST</i>
              
            </p>
          </div>
        </div>
      </div>
    <% } %>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const taxSwitch = document.getElementById("switchCheckDefault");
    const taxInfos = document.getElementsByClassName("tax-info");

    if (taxSwitch) {
      taxSwitch.addEventListener("change", (e) => {
        const isChecked = e.target.checked;

        // Show or hide GST info for all listings
        for (let info of taxInfos) {
          info.style.display = isChecked ? "inline" : "none";
        }
      });
    }
  });

  document.addEventListener("DOMContentLoaded", () => {
    // Select all filters
    const filters = document.querySelectorAll(".filter");

    filters.forEach(filter => {
      filter.addEventListener("click", () => {
        // Remove active class from all filters
        filters.forEach(f => f.classList.remove("active"));
        // Add active class to the clicked one
        filter.classList.add("active");
      });
    });
  });
</script>
